# 🧠 OpenSearch 스터디 실습 과제 모음

## 📌 스터디 개요

오픈서치를 활용해 **광고 플랫폼 통계 데이터를 효율적으로 색인하고 조회**하는 방법을 실습을 통해 학습합니다.

* **목표 시스템 구성**
  RDS → (가공) → OpenSearch
  광고 상품 목록 조회 시 통계 데이터를 OpenSearch에서 조회

* **학습 포인트**

    * 색인 설계 전략 (Mapping, Shard 등)
    * 색인 시 유의할 점
    * 조회 성능 튜닝
    * 실시간 데이터 반영
    * 오픈서치 쿼리 DSL
    * 모니터링 & 장애 대응
---
### 사용법
- essearch, kibana 컨테이너 실행
```bash
docker-compose up -d
```

- elasticsearch 상태 확인
```bash
curl http://localhost:9200/_cluster/health
```

- kibana
  - 브라우저에서 `http://localhost:5601` 접속

#### 테스트용 데이터
```bash
[데이터 생성]
curl -X POST http://localhost:8080/api/sample-data/generate

[삭제]
curl -X DELETE http://localhost:8080/api/sample-data/clear
```

키바나 콘솔 (사이드 메뉴>DevTools)
```aiignore
[광고 상품 조회]
GET ad_products/_search

[광고 통계 조회]
GET ad_statistics/_search
```




## 🗂 과제 목록

---

### ✅ 과제 1. 오픈서치 클러스터 로컬 환경 구축

* **목표**: Docker로 로컬에서 오픈서치 환경을 구성
* **내용**

    * Docker Compose로 OpenSearch + OpenSearch Dashboards 설치
    * API를 통한 색인/조회 테스트
* **핵심 학습**: 클러스터 구조 이해, Dashboards 사용법

---

### 과제 2. 샘플 데이터 색인 및 기본 조회

* **목표**: 광고 상품 및 통계 데이터를 색인하고 쿼리 실습
* **내용**

    * 광고 상품 구조 정의 (상품명, ID, 광고 유형, 예산 등)
    * 통계 데이터 구조 정의 (노출수, 클릭수, 전환수 등)
    * Bulk API로 데이터 색인
    * DSL 쿼리로 조회 실습
* **핵심 학습**: 매핑 구조, Bulk 색인, 기본 검색 쿼리

---

### 과제 3. 색인 설계 전략 실습

* **목표**: 다양한 색인 전략 비교 실습
* **내용**

    * 단일 인덱스 vs 시간 단위 인덱스 설계
    * nested 구조 vs flat 구조
    * 매핑 튜닝 (타입 지정, analyzer 설정)
* **핵심 학습**: 조회 패턴에 맞춘 색인 전략 설계

---

### 과제 4. 검색 성능 튜닝 실습

* **목표**: 대량 데이터에서의 검색 성능 실습
* **내용**

    * 테스트 데이터 생성기 제작 (N만 건 이상)
    * 쿼리별 응답 시간 측정
    * filter vs must, keyword vs text 차이
    * Shard/Replica 설정 변경 실험
* **핵심 학습**: 색인 수, 쿼리 종류, 샤드 전략에 따른 성능 변화

---

### 과제 5. 실시간 데이터 처리 구조 설계

* **목표**: RDS의 데이터를 실시간으로 반영하는 파이프라인 설계
* **내용**

    * RDS 데이터 → OpenSearch로 동기/비동기 전송 구조 구상
    * Kafka or Logstash 사용 실험 (선택)
    * 색인 시 데이터 가공 필요성 판단
* **핵심 학습**: 실시간 ETL 구조 설계, 색인 시 처리 전략

---

### 과제 6. 통계형 쿼리 실습 (집계/정렬)

* **목표**: 광고 통계 데이터를 기준으로 정렬/집계 쿼리 작성
* **내용**

    * 광고별 클릭률 계산
    * 예산 소진율 상위 광고 조회
    * 광고 그룹별 집계
* **핵심 학습**: Aggregation, Script 쿼리, 정렬 기준 조정

---

### 과제 7. 오픈서치 장애 대응 및 모니터링 실습

* **목표**: 운영 중 장애를 예측하고 대응하는 연습
* **내용**

    * Dashboards로 상태 확인
    * Slow log, Heap 사용량 체크
    * 색인 실패 대응 전략 수립
* **핵심 학습**: 운영 관점에서 오픈서치 다루기

---

## 📘 스터디 진행 방식

* 과제는 **매주 1개씩** 진행
* 실습 결과 및 코드/설정은 이 저장소에 PR로 공유
* 개인 실습 브랜치로 진행, 주 1회 코드 리뷰 및 발표
* 발표자는 과제별로 순환

---

필요 시 과제를 더 추가하거나 순서를 조정할 수 있습니다.
질문/이슈는 Issue 탭에 남겨주세요!
